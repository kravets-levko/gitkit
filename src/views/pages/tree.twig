{% extends 'layout/main.twig' %}

{% block title %}{{ repository.name }} - GitKit{% endblock %}

{% block content %}
  <h1>{% include 'components/repository-header.twig' with {repository: repository} %}</h1>
  <div class="my-3">
    {% include 'components/repository-stats.twig' with {
      repository: repository,
      ref: ref,
      base: repository.name,
    } %}
  </div>

  <div class="row my-3">
    <div class="col-auto">
      {% include 'components/ref-selector.twig' with {
        ref: ref,
        branches: repository.branches,
        tags: repository.tags,
        base: repository.name ~ '/tree',
      } %}
    </div>
    <div class="col"></div>
    <div class="col-auto">
      {% include 'components/clone-urls.twig' with {
        cloneUrls: repository.cloneUrls
      } %}
    </div>
  </div>

  <div class="card my-3">
    <div class="card-header border-0 p-0">
      {% include 'components/latest-commit.twig' with {
        commit: ref.head,
        base: repository.name,
      } %}
    </div>

    <div class="card-body p-0">
      {% include 'components/tree-view.twig' with {
        ref: ref,
        defaultBranch: repository.defaultBranch,
        path: path,
        base: repository.name,
      } %}
    </div>
  </div>

  <div class="my-3">
    {% include 'components/readme.twig' with {tree: ref.tree} %}
  </div>
{% endblock %}
